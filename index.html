<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>RUINACOIN TAP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { background:#0f0f0f; color:#fff; font-family:Arial, sans-serif; text-align:center; padding:20px; margin:0; }
    #playerId { position:fixed; top:10px; left:10px; background:#1a1a1a; padding:8px 12px; border-radius:8px; color:#00ffd5; font-weight:bold; font-size:16px; box-shadow:0 0 10px #00ffd5; z-index:9999; cursor:pointer; }
    h1 { font-size:32px; color:#ff00aa; margin-bottom:10px; text-shadow:0 0 10px #ff00aa; }
    #score { font-size:24px; margin-bottom:10px; }
    #clickPowerDisplay { font-size:20px; color:#00ffd5; margin-bottom:20px; }
    .tap-image { width:80%; max-width:300px; height:auto; cursor:pointer; border-radius:20px; box-shadow:0 0 20px #ff00aa; transition:transform .1s ease; }
    .tap-image:active { transform:scale(.97); }
    .shop { margin-top:30px; }
    .shop h2 { font-size:20px; margin-bottom:10px; color:#00ffd5; }
    .shop-button { font-size:16px; margin:8px; padding:10px 20px; background:#222; color:#fff; border:2px solid #00ffd5; border-radius:10px; cursor:pointer; transition:background-color .2s ease; }
    .shop-button:hover { background:#333; }
    #message { margin-top:20px; font-size:18px; color:#ffcc00; min-height:24px; }
    #leaderboard { list-style:none; padding:0; margin-top:20px; }
    #leaderboard li { font-size:16px; margin:4px 0; }
    .skin-button { display:inline-block; margin:10px; border:2px solid #00ffd5; border-radius:12px; cursor:pointer; padding:8px; background:#111; transition:background-color .3s ease; max-width:150px; }
    .skin-button:hover { background:#222; }
    .skin-img { max-width:100%; border-radius:10px; display:block; margin-bottom:6px; box-shadow:0 0 10px #00ffd5; }
    .skin-info { color:#00ffd5; font-size:14px; font-weight:bold; }
    #console { position:fixed; bottom:0; left:0; width:100%; background:rgba(0,0,0,0.95); border-top:2px solid #00ffd5; padding:10px; display:none; z-index:10000; }
    #consoleInput { width:95%; padding:10px; background:#111; border:2px solid #00ffd5; border-radius:8px; color:#00ffd5; font-size:16px; outline:none; }
    .hint { font-size:12px; color:#999; margin-top:6px; }
  </style>
</head>
<body>
  <div id="playerId">ID: ??????</div>

  <h1>RUINACOIN TAP</h1>
  <div id="score">RUINA: 0</div>
  <div id="clickPowerDisplay">Click Power: +1</div>

  <img id="tapButton" src="https://i.postimg.cc/BnNsnqwB/photo-5321361869136590759-y-removebg-preview.png" alt="RUINA Button" class="tap-image" />

  <div class="shop">
    <h2>Upgrade Shop</h2>
    <button class="shop-button" id="buyUpgradeBtn">Add +1 per click — <span id="upgradeCost">50</span> RUINA</button>
    <button class="shop-button" id="buyAutoClickBtn">Auto Click (lvl <span id="autoClickLevel">0</span>) — <span id="autoClickCost">20000</span> RUINA</button>
  </div>

  <div class="shop">
    <h2>Skin Shop</h2>
    <div id="skinList"></div>
  </div>

  <div style="margin-top:20px;">
    <input type="text" id="playerName" placeholder="Enter your name" style="padding:8px; border-radius:5px;">
    <button id="saveScoreBtn" class="shop-button">Save Score</button>
  </div>

  <div style="margin-top:30px;">
    <h2 style="color:#00ffd5;">Leaderboard</h2>
    <ul id="leaderboard"></ul>
  </div>

  <div id="message"></div>

  <div id="console">
    <input type="text" id="consoleInput" placeholder="Команды: /pay id сумма, /click id сила, /changeID old new, /balance id, /close" />
    <div class="hint">Пример: /click 143434 60 → теперь у ID 143434 сила клика 60.</div>
  </div>

  <script>
    let ruina = 0;
    let clickPower = 1;
    let upgradeCost = 50;
    let autoClickLevel = 0;
    let autoClickCost = 20000;
    let autoClickInterval = null;
    let selectedSkinIndex = null;
    let playerID = null;

    const skins = [
      { name: "Skin 1", price: 10000, img: "https://i.postimg.cc/d7hZXDtL/photo-1-2025-09-16-13-48-10.jpg", bonus:{clickMult:1.1,autoMult:1}},
      { name: "Skin 2", price: 25000, img: "https://i.postimg.cc/4HgKm5v9/photo-2-2025-09-16-13-48-10.jpg", bonus:{clickMult:1.25,autoMult:1}},
      { name: "Skin 3", price: 50000, img: "https://i.postimg.cc/0MmMk3Sv/photo-3-2025-09-16-13-48-10.jpg", bonus:{clickMult:1.5,autoMult:1}},
      { name: "Skin 4", price: 120000, img: "https://i.postimg.cc/RJLWfHGb/photo-4-2025-09-16-13-48-10.jpg", bonus:{clickMult:1,autoMult:2}},
      { name: "Skin 5", price: 350000, img: "https://i.postimg.cc/7CjJyDfX/photo-5-2025-09-16-13-48-10.jpg", bonus:{clickMult:1,autoMult:3}},
      { name: "Пацан с 67", price: 676767, img: "https://i.postimg.cc/0rYMhTxd/photo-6-2025-09-16-13-48-10.jpg", bonus:{clickMult:3,autoMult:3}}
    ];

    function generateRandomID() { return String(Math.floor(100000 + Math.random() * 900000)); }

    function getBalance(id) { return Number(localStorage.getItem("ruina_" + id) || "0"); }
    function setBalance(id, amount) { localStorage.setItem("ruina_" + id, String(Math.max(0, Math.floor(amount)))); }

    function loadData(id) { try { return JSON.parse(localStorage.getItem("ruinaData_" + id)) || {}; } catch { return {}; } }
    function saveData(id, data) { localStorage.setItem("ruinaData_" + id, JSON.stringify(data)); }

    function loadPlayer() {
      playerID = localStorage.getItem("playerID");
      if (!playerID) {
        playerID = generateRandomID();
        localStorage.setItem("playerID", playerID);
        setBalance(playerID, 0);
      }
      document.getElementById("playerId").innerText = "ID: " + playerID;
      ruina = getBalance(playerID);
      const d = loadData(playerID);
      clickPower = d.clickPower || 1;
      upgradeCost = d.upgradeCost || 50;
      autoClickLevel = d.autoClickLevel || 0;
      autoClickCost = d.autoClickCost || 20000;
      selectedSkinIndex = d.selectedSkinIndex ?? null;
      updateUI();
      if (autoClickLevel > 0) startAutoClick();
      applySkinBonus();
    }

    function savePlayer() {
      setBalance(playerID, ruina);
      saveData(playerID, { clickPower, upgradeCost, autoClickLevel, autoClickCost, selectedSkinIndex });
    }

    function applySkinBonus() {
      let clickBonus = 1, autoBonus = 1;
      if (selectedSkinIndex !== null) {
        const s = skins[selectedSkinIndex];
        clickBonus *= s.bonus.clickMult;
        autoBonus *= s.bonus.autoMult;
        document.getElementById("tapButton").src = s.img;
      }
      document.getElementById("clickPowerDisplay").innerText = "Click Power: +" + Math.floor(clickPower * clickBonus);
      return {clickBonus,autoBonus};
    }

    function updateUI() {
      const {clickBonus,autoBonus} = applySkinBonus();
      document.getElementById("score").innerText = "RUINA: " + ruina;
      document.getElementById("upgradeCost").innerText = upgradeCost;
      document.getElementById("autoClickLevel").innerText = autoClickLevel;
      document.getElementById("autoClickCost").innerText = autoClickCost;
    }

    function tap() {
      const {clickBonus} = applySkinBonus();
      ruina += Math.floor(clickPower * clickBonus);
      updateUI(); savePlayer();
    }

    function buyUpgrade() {
      if (ruina >= upgradeCost) {
        ruina -= upgradeCost;
        clickPower++;
        upgradeCost = Math.floor(upgradeCost * 1.5);
        updateUI(); savePlayer();
        showMsg("Upgrade bought!");
      } else showMsg("Not enough RUINA");
    }

    function buyAutoClick() {
      if (ruina >= autoClickCost) {
        ruina -= autoClickCost;
        autoClickLevel++;
        autoClickCost = Math.floor(autoClickCost * 1.5);
        startAutoClick();
        updateUI(); savePlayer();
        showMsg("AutoClick upgraded! Lvl " + autoClickLevel);
      } else showMsg("Not enough RUINA");
    }

    function startAutoClick() {
      if (autoClickInterval) clearInterval(autoClickInterval);
      autoClickInterval = setInterval(() => {
        const {autoBonus} = applySkinBonus();
        ruina += Math.floor(autoClickLevel * autoBonus);
        updateUI(); savePlayer();
      }, 1000);
    }

    function renderSkinShop() {
      const skinList = document.getElementById("skinList");
      skinList.innerHTML = "";
      skins.forEach((s, i) => {
        const d = document.createElement("div");
        d.className = "skin-button";
        d.innerHTML = `<img src="${s.img}" class="skin-img"><div class="skin-info">${s.name}</div><div class="skin-info">${s.price} RUINA</div><button class="shop-button" data-i="${i}">Buy</button>`;
        skinList.appendChild(d);
      });
      skinList.querySelectorAll("button").forEach(b => b.onclick = () => buySkin(+b.dataset.i));
    }

    function buySkin(i) {
      const s = skins[i];
      if (ruina >= s.price) {
        ruina -= s.price; selectedSkinIndex = i;
        updateUI(); savePlayer();
        showMsg("Bought " + s.name);
      } else showMsg("Not enough RUINA");
    }

    function showMsg(t) {
      const m = document.getElementById("message");
      m.innerText = t;
      setTimeout(() => m.innerText = "", 3000);
    }

    // ==== Консоль ====
    function handleCmd(raw) {
      const a = raw.trim().split(/\s+/);
      const c = a[0]?.toLowerCase();
      if (c === "/pay") {
        const id = a[1], sum = +a[2];
        if (!id || !sum) return showMsg("Usage: /pay id sum");
        setBalance(id, getBalance(id) + sum);
        if (id === playerID) ruina = getBalance(playerID);
        updateUI(); showMsg(`Gave ${sum} to ${id}`);
      }
      else if (c === "/click") {
        const id = a[1], p = +a[2];
        if (!id || !p) return showMsg("Usage: /click id power");
        const d = loadData(id);
        d.clickPower = p;
        saveData(id, d);
        if (id === playerID) clickPower = p;
        updateUI(); showMsg(`Click power for ${id} set to ${p}`);
      }
      else if (c === "/changeid") {
        const oldId = a[1], newId = a[2];
        if (!oldId || !newId) return showMsg("Usage: /changeID old new");
        const bal = getBalance(oldId);
        setBalance(newId, bal);
        localStorage.removeItem("ruina_" + oldId);
        const d = loadData(oldId);
        if (Object.keys(d).length) {
          saveData(newId, d);
          localStorage.removeItem("ruinaData_" + oldId);
        }
        if (playerID === oldId) {
          playerID = newId;
          localStorage.setItem("playerID", newId);
          ruina = bal;
          clickPower = d.clickPower || 1;
        }
        updateUI(); showMsg(`ID changed ${oldId} → ${newId}`);
        document.getElementById("playerId").innerText = "ID: " + playerID;
      }
      else if (c === "/balance") {
        const id = a[1]; if (!id) return showMsg("Usage: /balance id");
        showMsg(`${id} balance: ${getBalance(id)}`);
      }
      else if (c === "/close") {
        document.getElementById("console").style.display = "none";
      } else showMsg("Unknown command");
    }

    document.addEventListener("DOMContentLoaded", () => {
      loadPlayer(); renderSkinShop();
      document.getElementById("tapButton").onclick = tap;
      document.getElementById("buyUpgradeBtn").onclick = buyUpgrade;
      document.getElementById("buyAutoClickBtn").onclick = buyAutoClick;
      document.getElementById("playerId").ondblclick = () => {
        const c = document.getElementById("console");
        c.style.display = c.style.display === "block" ? "none" : "block";
        if (c.style.display === "block") document.getElementById("consoleInput").focus();
      };
      document.getElementById("consoleInput").addEventListener("keydown", e => {
        if (e.key === "Enter") { handleCmd(e.target.value); e.target.value = ""; }
      });
    });
  </script>
</body>
</html>
