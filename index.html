<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>RUINA CLICKER</title>
  <style>
    body { font-family: Arial; background:#222; color:#eee; text-align:center; }
    #game { margin-top:20px; }
    #tapButton { width:150px; cursor:pointer; border:4px solid #444; border-radius:12px; }
    .shop-item { display:inline-block; margin:10px; padding:10px; background:#333; border-radius:10px; width:150px; }
    .shop-item img { width:100px; height:100px; }
    .owned { border:2px solid yellow; }
    .selected { border:3px solid lime; }
    #console { background:#111; padding:10px; margin-top:20px; }
    #messages { margin-top:10px; color:lightgreen; min-height:20px; }
  </style>
</head>
<body>
  <h1>ðŸ’€ RUINA CLICKER ðŸ’€</h1>
  <div id="playerId"></div>
  <div id="score">RUINA: 0</div>
  <div id="clickPowerDisplay">Click Power: +1</div>

  <div id="game">
    <img id="tapButton" src="https://i.postimg.cc/d7hZXDtL/photo-1-2025-09-16-13-48-10.jpg" onclick="tap()">
  </div>

  <h2>Shop</h2>
  <button onclick="buyUpgrade()">Upgrade (+1 Power) â€“ <span id="upgradeCost">50</span></button><br><br>
  <button onclick="buyAutoClick()">AutoClick â€“ <span id="autoClickCost">20000</span></button>
  <div>AutoClick Level: <span id="autoClickLevel">0</span></div>

  <h2>Skin Shop</h2>
  <div id="skinShop"></div>

  <div id="console">
    <h2>Console</h2>
    <input type="text" id="consoleInput" placeholder="Enter command...">
    <button onclick="runCommand()">Run</button>
  </div>

  <div id="messages"></div>

<script>
  let ruina = 0;
  let clickPower = 1;
  let upgradeCost = 50;
  let autoClickLevel = 0;
  let autoClickCost = 20000;
  let autoClickInterval = null;
  let selectedSkinIndex = null;
  let playerID = null;
  let ownedSkins = [];

  const skins = [
    { name: "Skin 1", price: 10000, img: "https://i.postimg.cc/d7hZXDtL/photo-1-2025-09-16-13-48-10.jpg" },
    { name: "Skin 2", price: 25000, img: "https://i.postimg.cc/4HgKm5v9/photo-2-2025-09-16-13-48-10.jpg" },
    { name: "Skin 3", price: 50000, img: "https://i.postimg.cc/0MmMk3Sv/photo-3-2025-09-16-13-48-10.jpg" },
    { name: "Skin 4", price: 120000, img: "https://i.postimg.cc/RJLWfHGb/photo-4-2025-09-16-13-48-10.jpg" },
    { name: "Skin 5", price: 350000, img: "https://i.postimg.cc/7CjJyDfX/photo-5-2025-09-16-13-48-10.jpg" },
    { name: "Skin 6", price: 676767, img: "https://i.postimg.cc/0rYMhTxd/photo-6-2025-09-16-13-48-10.jpg" }
  ];

  function generateRandomID() {
    return String(Math.floor(100000 + Math.random() * 900000));
  }

  function getBalance(id) {
    return Number(localStorage.getItem("ruina_" + id) || "0");
  }

  function setBalance(id, amount) {
    localStorage.setItem("ruina_" + id, String(Math.max(0, Math.floor(amount))));
  }

  function loadData(id) {
    try { return JSON.parse(localStorage.getItem("ruinaData_" + id)) || {}; }
    catch { return {}; }
  }

  function saveData(id, data) {
    localStorage.setItem("ruinaData_" + id, JSON.stringify(data));
  }

  function loadPlayer() {
    playerID = localStorage.getItem("playerID");
    if (!playerID) {
      playerID = generateRandomID();
      localStorage.setItem("playerID", playerID);
      setBalance(playerID, 0);
    }
    document.getElementById("playerId").innerText = "ID: " + playerID;
    ruina = getBalance(playerID);
    const d = loadData(playerID);
    clickPower = d.clickPower || 1;
    upgradeCost = d.upgradeCost || 50;
    autoClickLevel = d.autoClickLevel || 0;
    autoClickCost = d.autoClickCost || 20000;
    selectedSkinIndex = d.selectedSkinIndex ?? null;
    ownedSkins = d.ownedSkins || [];
    updateUI();
    if (autoClickLevel > 0) startAutoClick();
    if (selectedSkinIndex !== null) {
      document.getElementById("tapButton").src = skins[selectedSkinIndex].img;
    }
    renderSkinShop();
  }

  function savePlayer() {
    setBalance(playerID, ruina);
    saveData(playerID, { clickPower, upgradeCost, autoClickLevel, autoClickCost, selectedSkinIndex, ownedSkins });
  }

  function updateUI() {
    document.getElementById("score").innerText = "RUINA: " + ruina;
    document.getElementById("clickPowerDisplay").innerText = "Click Power: +" + clickPower;
    document.getElementById("upgradeCost").innerText = upgradeCost;
    document.getElementById("autoClickLevel").innerText = autoClickLevel;
    document.getElementById("autoClickCost").innerText = autoClickCost;
  }

  function tap() { ruina += clickPower; updateUI(); savePlayer(); }

  function buyUpgrade() {
    if (ruina >= upgradeCost) {
      ruina -= upgradeCost;
      clickPower++;
      upgradeCost = Math.floor(upgradeCost * 1.5);
      updateUI(); savePlayer();
      showMsg("Upgrade bought!");
    } else showMsg("Not enough RUINA");
  }

  function buyAutoClick() {
    if (ruina >= autoClickCost) {
      ruina -= autoClickCost;
      autoClickLevel++;
      autoClickCost = Math.floor(autoClickCost * 1.5);
      startAutoClick();
      updateUI(); savePlayer();
      showMsg("AutoClick upgraded! Lvl " + autoClickLevel);
    } else showMsg("Not enough RUINA");
  }

  function startAutoClick() {
    if (autoClickInterval) clearInterval(autoClickInterval);
    autoClickInterval = setInterval(() => { ruina += clickPower * autoClickLevel; updateUI(); savePlayer(); }, 1000);
  }

  function renderSkinShop() {
    const shop = document.getElementById("skinShop");
    shop.innerHTML = "";
    skins.sort((a,b)=>a.price-b.price).forEach((skin, i)=>{
      const div=document.createElement("div");
      div.className="shop-item";
      if (ownedSkins.includes(i)) div.classList.add("owned");
      if (selectedSkinIndex===i) div.classList.add("selected");
      div.innerHTML=`
        <img src="${skin.img}"><br>
        ${skin.name}<br>
        Price: ${skin.price}<br>
        ${ownedSkins.includes(i) ? 
          (selectedSkinIndex===i ? "<b>SELECTED</b>" : `<button onclick="selectSkin(${i})">Select</button>`) :
          `<button onclick="buySkin(${i})">Buy</button>`}
      `;
      shop.appendChild(div);
    });
  }

  function buySkin(i) {
    const s=skins[i];
    if (ruina>=s.price) {
      ruina-=s.price;
      ownedSkins.push(i);
      selectSkin(i);
      updateUI(); savePlayer();
      showMsg("Bought "+s.name);
    } else showMsg("Not enough RUINA");
  }

  function selectSkin(i) {
    selectedSkinIndex=i;
    document.getElementById("tapButton").src=skins[i].img;
    savePlayer();
    renderSkinShop();
  }

  function showMsg(txt) {
    const m=document.getElementById("messages");
    m.innerText=txt;
    setTimeout(()=>m.innerText="",3000);
  }

  function runCommand() {
    const input=document.getElementById("consoleInput").value.trim();
    if (!input) return;
    const args=input.split(" ");
    const cmd=args.shift().toLowerCase();

    if (cmd==="/pay") {
      const id=args[0], amount=Number(args[1]);
      if (!id||isNaN(amount)) return showMsg("Usage: /pay ID amount");
      if (ruina>=amount) {
        ruina-=amount;
        setBalance(id,getBalance(id)+amount);
        updateUI(); savePlayer();
        showMsg(`Paid ${amount} to ${id}`);
      } else showMsg("Not enough RUINA");
    }

    if (cmd==="/click") {
      const id=args[0], amount=Number(args[1]);
      if (!id||isNaN(amount)) return showMsg("Usage: /click ID amount");
      const d=loadData(id);
      d.clickPower=amount;
      saveData(id,d);
      showMsg(`Set click power of ${id} to ${amount}`);
    }

    if (cmd==="/changeid") {
      const oldID=args[0], newID=args[1];
      if (!oldID||!newID) return showMsg("Usage: /changeID oldID newID");
      const bal=getBalance(oldID), d=loadData(oldID);
      setBalance(newID,bal); saveData(newID,d);
      localStorage.removeItem("ruina_"+oldID);
      localStorage.removeItem("ruinaData_"+oldID);
      if (playerID===oldID) {
        playerID=newID; localStorage.setItem("playerID",playerID);
        ruina=bal; clickPower=d.clickPower||1;
        upgradeCost=d.upgradeCost||50;
        autoClickLevel=d.autoClickLevel||0;
        autoClickCost=d.autoClickCost||20000;
        selectedSkinIndex=d.selectedSkinIndex??null;
        ownedSkins=d.ownedSkins||[];
      }
      updateUI(); renderSkinShop(); savePlayer();
      showMsg(`ID changed from ${oldID} to ${newID}`);
    }

    document.getElementById("consoleInput").value="";
  }

  loadPlayer();
</script>
</body>
</html>
