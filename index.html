<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<title>RUINACOIN</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { background:#0f0f0f; color:#fff; font-family:Arial, sans-serif; text-align:center; padding:20px; margin:0; }
#playerId { position:fixed; top:10px; left:10px; background:#1a1a1a; padding:8px 12px; border-radius:8px; color:#00ffd5; font-weight:bold; font-size:16px; box-shadow:0 0 10px #00ffd5; z-index:9999; cursor:pointer; }
h1 { font-size:32px; color:#ff00aa; margin-bottom:10px; text-shadow:0 0 10px #ff00aa; }
#score { font-size:24px; margin-bottom:10px; }
#clickPowerDisplay { font-size:20px; color:#00ffd5; margin-bottom:20px; }
.tap-image { width:80%; max-width:300px; height:auto; cursor:pointer; border-radius:20px; box-shadow:0 0 20px #ff00aa; transition:transform .1s ease; }
.tap-image:active { transform:scale(.97); }
.shop { margin-top:30px; }
.shop h2 { font-size:20px; margin-bottom:10px; color:#00ffd5; }
.shop-button { font-size:16px; margin:8px; padding:10px 20px; background:#222; color:#fff; border:2px solid #00ffd5; border-radius:10px; cursor:pointer; transition:all .2s ease; }
.shop-button:hover { background:#333; transform:scale(1.05); }
#message { margin-top:20px; font-size:18px; color:#ffcc00; min-height:24px; white-space:pre-line; }
#skins { display:flex; flex-wrap:wrap; justify-content:center; }
.skin-button { display:inline-block; margin:10px; border:2px solid #00ffd5; border-radius:12px; cursor:pointer; padding:8px; background:#111; transition:all .3s ease; max-width:160px; text-align:center; }
.skin-button:hover { background:#222; transform:scale(1.05); }
.skin-img { max-width:100%; border-radius:10px; display:block; margin:0 auto 6px; box-shadow:0 0 10px #00ffd5; }
.skin-info { color:#00ffd5; font-size:14px; font-weight:bold; }
.selected-badge { display:inline-block; margin-top:6px; padding:4px 8px; background:#00ffd5; color:#000; border-radius:8px; font-weight:bold; font-size:12px; }
#topStatsContainer { margin-top:40px; text-align:left; max-width:400px; margin-left:auto; margin-right:auto; }

/* Консоль */
#console { display:none; position:fixed; bottom:0; left:0; width:100%; background:#111; color:#0f0; font-family:monospace; max-height:350px; overflow:hidden; padding:5px 10px; box-sizing:border-box; z-index:9999; }
#consoleHistory { font-size:12px; color:#0f0; margin-bottom:5px; max-height:50px; overflow-y:auto; border-bottom:1px solid #0f0; padding-bottom:2px; }
#consoleOutput { white-space:pre-wrap; margin-bottom:5px; max-height:200px; overflow-y:auto; }
#consoleInput { width:100%; padding:5px; font-family:monospace; background:#000; color:#0f0; border:none; outline:none; }
</style>
</head>
<body>

<div id="playerId">ID: ??????</div>

<h1>RUINACOIN TAP</h1>
<div id="score">RUINA: 0</div>
<div id="clickPowerDisplay">Click Power: +1</div>

<img id="tapButton" src="https://i.postimg.cc/BnNsnqwB/photo-5321361869136590759-y-removebg-preview.png" class="tap-image" alt="tap">

<div class="shop">
<h2>Upgrade Shop</h2>
<button class="shop-button" id="buyUpgradeBtn">Add +1 per click — <span id="upgradeCost">50</span> RUINA</button>
<button class="shop-button" id="buyAutoClickBtn">Auto Click (lvl <span id="autoClickLevel">0</span>) — <span id="autoClickCost">20000</span> RUINA</button>
</div>

<div class="shop">
<h2>Skin Shop</h2>
<div id="skins"></div>
</div>

<div id="message"></div>
<div id="topStatsContainer"></div>

<!-- Консоль -->
<div id="console">
  <div id="consoleHistory">Примеры команд: /pay ID СУММА, /click ID POWER, /autoclick ID LEVEL</div>
  <div id="consoleOutput"></div>
  <input id="consoleInput" type="text" placeholder="Введите команду...">
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-database-compat.js"></script>

<script>
// ====== FIREBASE CONFIG ======
const firebaseConfig = {
  apiKey: "AIzaSyCTPqupywSBU4S5inETk8p-tQFMe3Dx4tE",
  authDomain: "coin-2e819.firebaseapp.com",
  projectId: "coin-2e819",
  storageBucket: "coin-2e819.firebasestorage.app",
  messagingSenderId: "701106957724",
  appId: "1:701106957724:web:dfba4d3ce63521afb1ec59"
};
let firebaseEnabled = true;
try {
    if(!firebaseConfig.apiKey || firebaseConfig.apiKey.includes("ВАШ_")) firebaseEnabled=false;
    else firebase.initializeApp(firebaseConfig);
}catch(e){ firebaseEnabled=false; }

// ====== GLOBAL DATA ======
let ruina=0, baseClick=1, baseAuto=0, upgradeCost=50, autoClickCost=20000, selectedSkin=1, autoInterval=null, playerID=null, purchasedSkins=[];
let msgTimeout=null, commandHistory=[];

const skins=[
{id:1,name:"Default",img:"https://i.postimg.cc/BnNsnqwB/photo-5321361869136590759-y-removebg-preview.png",cost:0},
{id:2,name:"Skin 1",cost:10000,img:"https://i.postimg.cc/Q9pCQYSJ/photo-1.png",bonus:{clickMult:1.1,autoMult:1}},
{id:3,name:"Skin 2",cost:25000,img:"https://i.postimg.cc/4HgKm5v9/photo-2-2025-09-16-13-48-10.jpg",bonus:{clickMult:1.25,autoMult:1}},
{id:4,name:"Skin 3",cost:50000,img:"https://i.postimg.cc/0MmMk3Sv/photo-3-2025-09-16-13-48-10.jpg",bonus:{clickMult:1.5,autoMult:1}},
{id:5,name:"Skin 4",cost:120000,img:"https://i.postimg.cc/RJLWfHGb/photo-4-2025-09-16-13-48-10.jpg",bonus:{clickMult:1,autoMult:2}},
{id:6,name:"Skin 5",cost:350000,img:"https://i.postimg.cc/7CjJyDfX/photo-5-2025-09-16-13-48-10.jpg",bonus:{clickMult:1,autoMult:3}},
{id:7,name:"Skin 6",cost:700000,img:"https://i.postimg.cc/0rYMhTxd/photo-6-2025-09-16-13-48-10.jpg",bonus:{clickMult:3,autoMult:3}}
];

// ====== UTILS ======
function generateID(){ return String(Math.floor(100000+Math.random()*900000)); }
function loadOrCreatePlayerID(){ let id=localStorage.getItem("playerID"); if(!id){id=generateID(); localStorage.setItem("playerID",id);} return id; }
function getBalance(id){ return Number(localStorage.getItem("ruina_"+id)||0); }
function setBalance(id,val){ localStorage.setItem("ruina_"+id, Math.max(0, Math.round(val))); }
function savePlayer(){ localStorage.setItem("ruina_"+playerID, ruina); localStorage.setItem("ruinaData_"+playerID, JSON.stringify({baseClick, baseAuto, upgradeCost, autoClickCost, selectedSkin, purchasedSkins})); }
function showMsg(text,t=3000){ const m=document.getElementById("message"); m.innerText=text; if(msgTimeout) clearTimeout(msgTimeout); msgTimeout=setTimeout(()=>m.innerText="",t); }
function addHistory(cmd){ commandHistory.push(cmd); if(commandHistory.length>5) commandHistory.shift(); document.getElementById("consoleHistory").innerText = "Недавние команды: "+commandHistory.join(" | "); }

// ====== LOAD PLAYER ======
function loadPlayer(){
    playerID=loadOrCreatePlayerID();
    document.getElementById("playerId").innerText="ID: "+playerID;
    const saved=JSON.parse(localStorage.getItem("ruinaData_"+playerID)||"{}");
    baseClick=saved.baseClick??1; baseAuto=saved.baseAuto??0; upgradeCost=saved.upgradeCost??50; autoClickCost=saved.autoClickCost??20000;
    selectedSkin=saved.selectedSkin??1; purchasedSkins=saved.purchasedSkins??[1];
    ruina=getBalance(playerID)||0;
    const skin=skins.find(s=>s.id===selectedSkin); if(skin) document.getElementById("tapButton").src=skin.img;
    updateUI(); updateSkins(); if(baseAuto>0) startAutoClick();
}

// ====== UI ======
function updateUI(){
    let clickMult=1, autoMult=1;
    const skin=skins.find(s=>s.id===selectedSkin);
    if(skin?.bonus){ clickMult=skin.bonus.clickMult; autoMult=skin.bonus.autoMult; }
    document.getElementById("score").innerText="RUINA: "+Math.round(ruina);
    document.getElementById("clickPowerDisplay").innerText="Click Power: +"+(baseClick*clickMult);
    document.getElementById("upgradeCost").innerText=upgradeCost;
    document.getElementById("autoClickLevel").innerText=baseAuto;
    document.getElementById("autoClickCost").innerText=autoClickCost;
}

// ====== CLICK ======
function tap(){ let clickMult=1; const skin=skins.find(s=>s.id===selectedSkin); if(skin?.bonus) clickMult=skin.bonus.clickMult; ruina+=baseClick*clickMult; updateUI(); savePlayer(); }
document.getElementById("tapButton").addEventListener("click",tap);

// ====== UPGRADES ======
document.getElementById("buyUpgradeBtn").addEventListener("click",()=>{ if(ruina>=upgradeCost){ ruina-=upgradeCost;baseClick++; upgradeCost=Math.floor(upgradeCost*1.5); showMsg("Click power upgraded!"); updateUI(); savePlayer(); }else showMsg("Not enough RUINA!");});
document.getElementById("buyAutoClickBtn").addEventListener("click",()=>{ if(ruina>=autoClickCost){ ruina-=autoClickCost;baseAuto++; autoClickCost=Math.floor(autoClickCost*2.5); showMsg("Auto click upgraded!"); startAutoClick(); updateUI(); savePlayer(); }else showMsg("Not enough RUINA!");});
function startAutoClick(){ if(autoInterval) clearInterval(autoInterval); autoInterval=setInterval(()=>{ let autoMult=1; const skin=skins.find(s=>s.id===selectedSkin); if(skin?.bonus) autoMult=skin.bonus.autoMult; ruina+=baseAuto*autoMult; updateUI(); savePlayer(); },1000); }

// ====== SKINS ======
function updateSkins(){ const container=document.getElementById("skins"); container.innerHTML=""; skins.forEach(s=>{ const btn=document.createElement("div"); btn.className="skin-button"; const owned=purchasedSkins.includes(s.id); const price=owned?0:(s.cost||0); btn.innerHTML=`<img src="${s.img}" class="skin-img" style="${selectedSkin===s.id?'border:2px solid #ff00aa;box-shadow:0 0 20px #ff00aa;':''}" alt="${s.name}"><div class="skin-info">${s.name}<br>${price} RUINA</div>${s.bonus?`<div style="font-size:12px;color:#ff00aa;">Click x${s.bonus.clickMult}, Auto x${s.bonus.autoMult}</div>`:""}${selectedSkin===s.id?'<div class="selected-badge">SELECTED</div>':''}`; btn.onclick=()=>{ if(selectedSkin===s.id){ showMsg("Already selected!"); return;} if(!owned){ if(ruina<s.cost){ showMsg("Not enough RUINA!"); return;} ruina-=s.cost; purchasedSkins.push(s.id);} selectedSkin=s.id; document.getElementById("tapButton").src=s.img; updateUI(); updateSkins(); savePlayer(); showMsg(`Skin changed to ${s.name}`);}; container.appendChild(btn);}); }

// ====== CONSOLE ======
const playerIdEl=document.getElementById("playerId");
playerIdEl.addEventListener("dblclick",()=>{ const c=document.getElementById("console"); c.style.display=c.style.display==="none"?"block":"none";});
document.getElementById("consoleInput").addEventListener("keydown",e=>{ if(e.key==="Enter"){ const cmd=e.target.value.trim(); if(cmd){ addHistory(cmd); handleConsoleCommand(cmd); } e.target.value=""; }});

function handleConsoleCommand(cmd){
    const parts=cmd.split(" "), command=parts[0]; 
    const output=document.getElementById("consoleOutput");
    function log(text){ output.innerText+=text+"\n"; output.scrollTop=output.scrollHeight;}

    if(command==="/pay" && parts.length===3){
        const id=parts[1], sum=parseInt(parts[2]);
        if(!isNaN(sum)){
            let current=getBalance(id);
            current+=sum;
            setBalance(id,current);
            if(id===playerID){ ruina=current; updateUI(); }
            log(`Выдали ${sum} RUINA ID ${id}`);
            showMsg(`Выдали ${sum} RUINA ID ${id}`);
        }
    }
    else if(command==="/click" && parts.length===3){
        const id=parts[1], power=parseInt(parts[2]);
        if(!isNaN(power)){
            const data=JSON.parse(localStorage.getItem("ruinaData_"+id)||"{}");
            data.baseClick=power;
            localStorage.setItem("ruinaData_"+id,JSON.stringify(data));
            if(id===playerID){ baseClick=power; updateUI(); }
            log(`ClickPower ID ${id} = ${power}`);
            showMsg(`ClickPower ID ${id} = ${power}`);
        }
    }
    else if(command==="/autoclick" && parts.length===3){
        const id=parts[1], lvl=parseInt(parts[2]);
        if(!isNaN(lvl)){
            const data=JSON.parse(localStorage.getItem("ruinaData_"+id)||"{}");
            data.baseAuto=lvl;
            localStorage.setItem("ruinaData_"+id,JSON.stringify(data));
            if(id===playerID){ baseAuto=lvl; startAutoClick(); updateUI(); }
            log(`AutoClick ID ${id} = ${lvl}`);
            showMsg(`AutoClick ID ${id} = ${lvl}`);
        }
    }
    else if(command==="/balance" && parts.length===2){
        const id=parts[1];
        log(`Баланс ID ${id}: ${getBalance(id)} RUINA`);
        showMsg(`Баланс ID ${id}: ${getBalance(id)} RUINA`);
    }
    else{ log("Неизвестная команда"); showMsg("Неизвестная команда"); }
}

// ====== SAVE ON EXIT ======
window.addEventListener("beforeunload",()=>{ try{ savePlayer(); }catch(e){} });

// ====== AUTO START ======
loadPlayer();
</script>
</body>
</html>
