<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>RUINACOIN TAP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { background:#0f0f0f; color:#fff; font-family:Arial, sans-serif; text-align:center; padding:20px; margin:0; }
    #playerId { position:fixed; top:10px; left:10px; background:#1a1a1a; padding:8px 12px; border-radius:8px; color:#00ffd5; font-weight:bold; font-size:16px; box-shadow:0 0 10px #00ffd5; z-index:9999; cursor:pointer; }
    h1 { font-size:32px; color:#ff00aa; margin-bottom:10px; text-shadow:0 0 10px #ff00aa; }
    #score { font-size:24px; margin-bottom:10px; }
    #clickPowerDisplay { font-size:20px; color:#00ffd5; margin-bottom:20px; }
    .tap-image { width:80%; max-width:300px; height:auto; cursor:pointer; border-radius:20px; box-shadow:0 0 20px #ff00aa; transition:transform .1s ease; }
    .tap-image:active { transform:scale(.97); }
    .shop { margin-top:30px; }
    .shop h2 { font-size:20px; margin-bottom:10px; color:#00ffd5; }
    .shop-button { font-size:16px; margin:8px; padding:10px 20px; background:#222; color:#fff; border:2px solid #00ffd5; border-radius:10px; cursor:pointer; transition:background-color .2s ease; }
    .shop-button:hover { background:#333; }
    #message { margin-top:20px; font-size:18px; color:#ffcc00; min-height:24px; }
    #leaderboard { list-style:none; padding:0; margin-top:20px; }
    #leaderboard li { font-size:16px; margin:4px 0; }
    .skin-button { display:inline-block; margin:10px; border:2px solid #00ffd5; border-radius:12px; cursor:pointer; padding:8px; background:#111; transition:background-color .3s ease; max-width:160px; text-align:center; }
    .skin-button:hover { background:#222; }
    .skin-img { max-width:100%; border-radius:10px; display:block; margin:0 auto 6px; box-shadow:0 0 10px #00ffd5; }
    .skin-info { color:#00ffd5; font-size:14px; font-weight:bold; }
    #console { position:fixed; bottom:0; left:0; width:100%; background:rgba(0,0,0,0.95); border-top:2px solid #00ffd5; padding:10px; display:none; z-index:10000; }
    #consoleInput { width:95%; padding:10px; background:#111; border:2px solid #00ffd5; border-radius:8px; color:#00ffd5; font-size:16px; outline:none; }
    .hint { font-size:12px; color:#999; margin-top:6px; text-align:left; max-width:900px; margin-left:auto; margin-right:auto; }
    .selected-badge { display:inline-block; margin-top:6px; padding:4px 8px; background:#00ffd5; color:#000; border-radius:8px; font-weight:bold; font-size:12px; }
    /* –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å */
    #adminPanel { display:none; margin-top:20px; padding:10px; background:#111; border:2px solid #00ffd5; border-radius:10px; max-height:300px; overflow:auto; text-align:left; font-size:14px; }
    #adminPanel h3 { color:#ffcc00; margin-top:0; }
    #closeAdmin { margin-top:10px; padding:5px 15px; border:2px solid #ffcc00; border-radius:8px; background:#222; color:#ffcc00; cursor:pointer; }
    #closeAdmin:hover { background:#333; }
  </style>
</head>
<body>
  <div id="playerId">ID: ??????</div>

  <h1>RUINACOIN TAP</h1>
  <div id="score">RUINA: 0</div>
  <div id="clickPowerDisplay">Click Power: +1</div>

  <img id="tapButton" src="https://i.postimg.cc/BnNsnqwB/photo-5321361869136590759-y-removebg-preview.png" alt="RUINA Button" class="tap-image" />

  <div class="shop">
    <h2>Upgrade Shop</h2>
    <button class="shop-button" id="buyUpgradeBtn">Add +1 per click ‚Äî <span id="upgradeCost">50</span> RUINA</button>
    <button class="shop-button" id="buyAutoClickBtn">Auto Click (lvl <span id="autoClickLevel">0</span>) ‚Äî <span id="autoClickCost">20000</span> RUINA</button>
  </div>

  <div class="shop">
    <h2>Skin Shop</h2>
    <div id="skinList"></div>
  </div>

  <div style="margin-top:20px;">
    <input type="text" id="playerName" placeholder="Enter your name" style="padding:8px; border-radius:5px;">
    <button id="saveScoreBtn" class="shop-button">Save Score</button>
  </div>

  <div style="margin-top:30px;">
    <h2 id="leaderboardTitle" style="color:#00ffd5;">Leaderboard</h2>
    <ul id="leaderboard"></ul>
  </div>

  <div id="message"></div>

  <div id="console">
    <input type="text" id="consoleInput" placeholder="–ö–æ–º–∞–Ω–¥—ã: /pay id —Å—É–º–º–∞, /click id —Å–∏–ª–∞, /changeID old new, /balance id, /close" />
    <div class="hint">–ü—Ä–∏–º–µ—Ä—ã: <b>/pay 123456 500</b> ‚Äî –¥–∞—Ç—å 500 RUINA id; <b>/click 123456 60</b> ‚Äî –Ω–∞–∑–Ω–∞—á–∏—Ç—å clickPower 60 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é; <b>/changeID 111111 222222</b> ‚Äî —Å–º–µ–Ω–∞ ID.</div>
  </div>

  <!-- –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
  <div id="adminPanel">
    <h3>üìú –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∏–≥—Ä–æ–∫–∞—Ö</h3>
    <div id="adminContent"></div>
    <button id="closeAdmin">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>

<script>
  let ruina = 0;
  let baseClick = 1;
  let baseAuto = 0;
  let upgradeCost = 50;
  let autoClickCost = 20000;
  let autoInterval = null;

  let effClick = 1;
  let effAuto = 0;

  let selectedSkinIndex = null;
  let purchasedSkins = [];
  let playerID = null;

  const skins = [
    { name: "Skin 1", price: 10000, img: "https://i.postimg.cc/d7hZXDtL/photo-1-2025-09-16-13-48-10.jpg", bonus: { clickMult: 1.1, autoMult: 1 } },
    { name: "Skin 2", price: 25000, img: "https://i.postimg.cc/4HgKm5v9/photo-2-2025-09-16-13-48-10.jpg", bonus: { clickMult: 1.25, autoMult: 1 } },
    { name: "Skin 3", price: 50000, img: "https://i.postimg.cc/0MmMk3Sv/photo-3-2025-09-16-13-48-10.jpg", bonus: { clickMult: 1.5, autoMult: 1 } },
    { name: "Skin 4", price: 120000, img: "https://i.postimg.cc/RJLWfHGb/photo-4-2025-09-16-13-48-10.jpg", bonus: { clickMult: 1, autoMult: 2 } },
    { name: "Skin 5", price: 350000, img: "https://i.postimg.cc/7CjJyDfX/photo-5-2025-09-16-13-48-10.jpg", bonus: { clickMult: 1, autoMult: 3 } },
    { name: "Skin 6", price: 676767, img: "https://i.postimg.cc/0rYMhTxd/photo-6-2025-09-16-13-48-10.jpg", bonus: { clickMult: 3, autoMult: 3 } }
  ];

  function generateRandomID() {
    return String(Math.floor(100000 + Math.random() * 900000));
  }
  function getBalance(id) {
    return Number(localStorage.getItem("ruina_" + id) || "0");
  }
  function setBalance(id, amount) {
    localStorage.setItem("ruina_" + id, String(Math.max(0, Math.floor(amount))));
  }
  function loadData(id) {
    try {
      const raw = localStorage.getItem("ruinaData_" + id);
      if (!raw) return null;
      return JSON.parse(raw);
    } catch {
      return null;
    }
  }
  function saveData(id, data) {
    localStorage.setItem("ruinaData_" + id, JSON.stringify(data));
  }

  function loadOrCreatePlayerID() {
    let id = localStorage.getItem("playerID");
    if (!id) {
      id = generateRandomID();
      localStorage.setItem("playerID", id);
      setBalance(id, 0);
      saveData(id, { baseClick: 1, baseAuto: 0, upgradeCost: 50, autoClickCost: 20000, selectedSkinIndex: null, purchasedSkins: [] });
    }
    return id;
  }

  function loadPlayer() {
    playerID = loadOrCreatePlayerID();
    document.getElementById("playerId").innerText = "ID: " + playerID;

    const saved = loadData(playerID);
    if (saved) {
      baseClick = saved.baseClick ?? 1;
      baseAuto = saved.baseAuto ?? 0;
      upgradeCost = saved.upgradeCost ?? 50;
      autoClickCost = saved.autoClickCost ?? 20000;
      selectedSkinIndex = saved.selectedSkinIndex ?? null;
      purchasedSkins = saved.purchasedSkins ?? [];
    }
    ruina = getBalance(playerID);
    applySkinBonuses();
    updateUI();
    if (effAuto > 0) startAutoClick();
  }

  function savePlayer() {
    setBalance(playerID, ruina);
    saveData(playerID, { baseClick, baseAuto, upgradeCost, autoClickCost, selectedSkinIndex, purchasedSkins });
  }

  function applySkinBonuses() {
    let clickMult = 1, autoMult = 1;
    if (selectedSkinIndex !== null && skins[selectedSkinIndex]) {
      const skin = skins[selectedSkinIndex];
      clickMult = skin.bonus.clickMult;
      autoMult = skin.bonus.autoMult;
      document.getElementById("tapButton").src = skin.img;
    } else {
      document.getElementById("tapButton").src = "https://i.postimg.cc/BnNsnqwB/photo-5321361869136590759-y-removebg-preview.png";
    }
    effClick = Math.floor(baseClick * clickMult);
    effAuto = Math.floor(baseAuto * autoMult);
  }

  function updateUI() {
    applySkinBonuses();
    document.getElementById("score").innerText = "RUINA: " + ruina;
    document.getElementById("clickPowerDisplay").innerText = "Click Power: +" + effClick;
    document.getElementById("upgradeCost").innerText = upgradeCost;
    document.getElementById("autoClickLevel").innerText = baseAuto;
    document.getElementById("autoClickCost").innerText = autoClickCost;
    markSelectedSkin();
  }

  function tap() {
    ruina += effClick;
    updateUI();
    savePlayer();
  }

  function buySkin(i) {
    const s = skins[i];
    if (!s) return;
    if (purchasedSkins.includes(i)) {
      selectedSkinIndex = i;
      showMsg("Selected " + s.name);
    } else if (ruina >= s.price) {
      ruina -= s.price;
      purchasedSkins.push(i);
      selectedSkinIndex = i;
      showMsg("Bought " + s.name);
    } else {
      return showMsg("Not enough RUINA");
    }
    applySkinBonuses();
    updateUI();
    savePlayer();
  }

  function renderSkinShop() {
    const skinList = document.getElementById("skinList");
    skinList.innerHTML = "";
    [...skins].sort((a,b)=>a.price-b.price).forEach((s, iSorted) => {
      const idx = skins.indexOf(s);
      const bought = purchasedSkins.includes(idx);
      const d = document.createElement("div");
      d.className = "skin-button";
      d.innerHTML = `
        <img src="${s.img}" class="skin-img" />
        <div class="skin-info">${s.name}</div>
        <div class="skin-info">${s.price.toLocaleString()} RUINA</div>
        <button class="shop-button" data-i="${idx}">${bought ? "Select" : "Buy"}</button>
        <div class="selected-placeholder" data-i="${idx}"></div>
      `;
      skinList.appendChild(d);
    });
    skinList.querySelectorAll("button.shop-button").forEach(btn => {
      btn.addEventListener("click", () => buySkin(Number(btn.dataset.i)));
    });
    markSelectedSkin();
  }

  function markSelectedSkin() {
    document.querySelectorAll(".selected-placeholder").forEach(p => p.innerHTML = "");
    if (selectedSkinIndex !== null) {
      const placeholder = document.querySelector(`.selected-placeholder[data-i="${selectedSkinIndex}"]`);
      if (placeholder) placeholder.innerHTML = `<div class="selected-badge">SELECTED</div>`;
    }
  }

  let msgTimeout = null;
  function showMsg(text, t = 3000) {
    const m = document.getElementById("message");
    m.innerText = text;
    if (msgTimeout) clearTimeout(msgTimeout);
    msgTimeout = setTimeout(() => m.innerText = "", t);
  }

  // === –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ===
  let leaderboardClicks = 0;
  let clickTimer = null;

  function showAdminPanel() {
    const content = document.getElementById("adminContent");
    content.innerHTML = "";
    for (let i = 0; i < localStorage.length; i++) {
      const key = localStorage.key(i);
      if (key.startsWith("ruinaData_")) {
        const id = key.replace("ruinaData_", "");
        const data = loadData(id) || {};
        const balance = getBalance(id);
        const line = document.createElement("div");
        line.style.marginBottom = "8px";
        line.innerText =
          `ID: ${id} | Balance: ${balance} | baseClick: ${data.baseClick ?? 0} | baseAuto: ${data.baseAuto ?? 0} | ` +
          `selectedSkin: ${data.selectedSkinIndex ?? "none"} | purchased: ${data.purchasedSkins ? data.purchasedSkins.join(",") : "[]"}`;
        content.appendChild(line);
      }
    }
    document.getElementById("adminPanel").style.display = "block";
  }

  document.getElementById("leaderboardTitle").addEventListener("click", () => {
    leaderboardClicks++;
    if (!clickTimer) {
      clickTimer = setTimeout(() => {
        leaderboardClicks = 0;
        clickTimer = null;
      }, 600);
    }
    if (leaderboardClicks === 3) {
      leaderboardClicks = 0;
      clearTimeout(clickTimer);
      clickTimer = null;
      showAdminPanel();
    }
  });

  document.getElementById("closeAdmin").addEventListener("click", () => {
    document.getElementById("adminPanel").style.display = "none";
  });

  document.addEventListener("DOMContentLoaded", () => {
    loadPlayer();
    renderSkinShop();
    updateUI();
    document.getElementById("tapButton").addEventListener("click", tap);
    setInterval(savePlayer, 5000);
    window.addEventListener("beforeunload", savePlayer);
  });
</script>
</body>
</html>
